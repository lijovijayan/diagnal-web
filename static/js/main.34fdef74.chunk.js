(this["webpackJsonpdiagnal-web"]=this["webpackJsonpdiagnal-web"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},31:function(e,t,n){var r={"./CONTENTLISTINGPAGE-PAGE1.json":32,"./CONTENTLISTINGPAGE-PAGE2.json":33,"./CONTENTLISTINGPAGE-PAGE3.json":34};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=31},32:function(e){e.exports=JSON.parse('{"page":{"title":"Romantic Comedy","total-content-items":"54","page-num-requested":"1","page-size-requested":"20","page-size-returned":"20","content-items":{"content":[{"name":"The Birds","poster-image":"poster1.jpg"},{"name":"Rear Window","poster-image":"poster2.jpg"},{"name":"Family Pot","poster-image":"poster3.jpg"},{"name":"Family Pot","poster-image":"poster2.jpg"},{"name":"Rear Window","poster-image":"poster1.jpg"},{"name":"The Birds","poster-image":"poster3.jpg"},{"name":"Rear Window","poster-image":"poster3.jpg"},{"name":"The Birds","poster-image":"poster2.jpg"},{"name":"Family Pot","poster-image":"poster1.jpg"},{"name":"The Birds","poster-image":"poster1.jpg"},{"name":"The Birds","poster-image":"poster1.jpg"},{"name":"Rear Window","poster-image":"poster2.jpg"},{"name":"Family Pot","poster-image":"poster3.jpg"},{"name":"Family Pot","poster-image":"poster2.jpg"},{"name":"Rear Window","poster-image":"poster1.jpg"},{"name":"The Birds","poster-image":"poster3.jpg"},{"name":"Rear Window","poster-image":"poster3.jpg"},{"name":"The Birds","poster-image":"poster2.jpg"},{"name":"Family Pot","poster-image":"poster1.jpg"},{"name":"The Birds","poster-image":"poster1.jpg"}]}}}')},33:function(e){e.exports=JSON.parse('{"page":{"title":"Romantic Comedy","total-content-items":"54","page-num-requested":"2","page-size-requested":"20","page-size-returned":"20","content-items":{"content":[{"name":"Rear Window","poster-image":"poster5.jpg"},{"name":"Family Pot","poster-image":"poster6.jpg"},{"name":"Family Pot","poster-image":"poster5.jpg"},{"name":"Rear Window","poster-image":"poster4.jpg"},{"name":"The Birds","poster-image":"poster6.jpg"},{"name":"Rear Window","poster-image":"poster6.jpg"},{"name":"The Birds","poster-image":"poster5.jpg"},{"name":"Family Pot","poster-image":"poster4.jpg"},{"name":"The Birds","poster-image":"poster4.jpg"},{"name":"Rear Window","poster-image":"poster5.jpg"},{"name":"Rear Window","poster-image":"poster5.jpg"},{"name":"Family Pot","poster-image":"poster6.jpg"},{"name":"Family Pot","poster-image":"poster5.jpg"},{"name":"Rear Window","poster-image":"poster4.jpg"},{"name":"The Birds","poster-image":"poster6.jpg"},{"name":"Rear Window","poster-image":"poster6.jpg"},{"name":"The Birds","poster-image":"poster5.jpg"},{"name":"Family Pot","poster-image":"poster4.jpg"},{"name":"The Birds","poster-image":"poster4.jpg"},{"name":"Rear Window","poster-image":"poster5.jpg"}]}}}')},34:function(e){e.exports=JSON.parse('{"page":{"title":"Romantic Comedy","total-content-items":"54","page-num-requested":"3","page-size-requested":"20","page-size-returned":"14","content-items":{"content":[{"name":"Family Pot","poster-image":"poster9.jpg"},{"name":"Family Pot","poster-image":"poster8.jpg"},{"name":"Rear Window","poster-image":"poster7.jpg"},{"name":"The Birds","poster-image":"poster9.jpg"},{"name":"Rear Window","poster-image":"poster9.jpg"},{"name":"The Birds","poster-image":"poster8.jpg"},{"name":"Family Pot","poster-image":"poster7.jpg"},{"name":"Family Pot","poster-image":"poster9.jpg"},{"name":"Family Pot","poster-image":"poster8.jpg"},{"name":"Rear Window","poster-image":"poster7.jpg"},{"name":"The Birds with an Extra Long Title","poster-image":"poster9.jpg"},{"name":"Rear Window","poster-image":"poster9.jpg"},{"name":"The Birds","poster-image":"poster8.jpg"},{"name":"Family Pot","poster-image":"posterthatismissing.jpg"}]}}}')},35:function(e,t,n){},36:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(10),i=n.n(o),s=(n(24),n(25),n(4)),c=n(17),p=n(18),m=n(7),g=n(5),l=n(16),u=n(9),d=n.n(u),j=n(15),f=n(2),h=n(3),b=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"createAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:e,payload:t,error:n,meta:r}}}]),e}(),O=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"fetchMovies",value:function(e,t){return new Promise((function(r,a){try{var o=n(31)("./CONTENTLISTINGPAGE-PAGE".concat(e,".json")).page;return r({page:o["page-num-requested"],pageSize:o["page-size-requested"],totalRecords:o["total-content-items"],movies:o["content-items"].content.filter((function(e){return e.name.trim().toLowerCase().includes(t.trim().toLowerCase())})),searchKey:t})}catch(i){return console.log(i),r(new Error(i))}}))}}]),e}(),v=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"fetchMovies",value:function(t){return function(){var n=Object(j.a)(d.a.mark((function n(r,a){var o,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=a(),i=o.movies.searchKey,r(b.createAction(e.SET_LOADER,!0)),O.fetchMovies(t,i).then((function(t){r(b.createAction(e.FETCH_MOVIES,t))})).catch((function(t){r(b.createAction(e.FETCH_MOVIES,{},t))})).finally((function(){r(b.createAction(e.SET_LOADER,!1))}));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},{key:"searchMovies",value:function(t){return function(){var n=Object(j.a)(d.a.mark((function n(r,a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(b.createAction(e.SET_LOADER,!0)),O.fetchMovies(1,t).then((function(t){r(b.createAction(e.FETCH_MOVIES,t))})).catch((function(t){r(b.createAction(e.FETCH_MOVIES,{},t))})).finally((function(){r(b.createAction(e.SET_LOADER,!1))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}]),e}();v.FETCH_MOVIES="MoviesAction.FETCH_MOVIES",v.SEARCH_MOVIES="MoviesAction.SEARCH_MOVIES",v.SET_LOADER="MoviesAction.SET_LOADER";var x={page:0,pageSize:20,totalRecords:0,movies:[],loading:!1,searchKey:""};var y=Object(s.combineReducers)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.FETCH_MOVIES:var n=e.movies;return n=t.payload.movies&&t.payload.page>1?[].concat(Object(l.a)(n),Object(l.a)(t.payload.movies)):t.payload.movies||[],Object(g.a)(Object(g.a)(Object(g.a)({},e),t.payload),{},{movies:n});case v.SET_LOADER:return Object(g.a)(Object(g.a)({},e),{},{loading:t.payload});default:return e}}}),E=(n(35),n(8)),T=(n(36),n(1)),w="/diagnal-web/images/placeholder_for_missing_posters.png",R=function(e){var t=e.src,n=e.alt,a=e.className,o=Object(r.useState)(w),i=Object(E.a)(o,2),s=i[0],c=i[1],p=Object(r.useState)(),m=Object(E.a)(p,2),g=m[0],l=m[1],u=Object(r.useRef)();return Object(r.useEffect)((function(){return g&&s!==t&&null!==u.current&&(IntersectionObserver?(u.current=new IntersectionObserver((function(e){e.forEach((function(e){(e.intersectionRatio>0||e.isIntersecting)&&(c(t),u.current.unobserve(g))}))}),{threshold:.01,rootMargin:"75%"}),u.current.observe(g)):c(t)),function(){u.current&&u.current.unobserve&&(u.current.unobserve(g),u.current=null)}}),[t,s,g]),Object(T.jsx)("img",{className:"".concat(a," lazy-image"),ref:l,src:s,alt:n,onLoad:function(e){e.target.classList.add("loaded")},onError:function(e){var t;e.target.classList.add("failed-loading"),c(w),null===(t=u.current)||void 0===t||t.unobserve(g),u.current=null},draggable:!1})},S=n(19),F="".concat("/diagnal-web","/images/search.png");function N(e){var t=e.onChange,n=e.title,a=Object(r.useState)(!1),o=Object(E.a)(a,2),i=o[0],s=o[1],c=Object(r.useCallback)(Object(S.debounce)(t,400),[]);return Object(T.jsxs)("div",{class:"search-bar flex flex-row items-center justify-end ".concat(i?"show-search":""),children:[i?Object(T.jsx)("input",{type:"text",class:"search-input flex-1 mx-3 px-3",onChange:function(e){return c(e.target.value)},placeholder:"search here..."}):Object(T.jsx)("div",{className:"text-xl pl-3 w-full text-left justify-start",children:n}),Object(T.jsx)("img",{className:"search-icon mr-3",src:F,alt:"search",draggable:!1,onClick:function(){i&&t(""),s(!i)}})]})}function A(e){var t=e.imageURL,n=e.name;return Object(T.jsxs)("div",{className:"movie-card flex flex-col xl:mb-6 lg:mb-6 md:mb-5 mb-4  xl:p-3 lg:p-3 md:p-2 p-2",children:[Object(T.jsx)(R,{src:t,alt:n,className:"mb-1"}),Object(T.jsx)("div",{children:n}),Object(T.jsx)("div",{className:"play-button",children:Object(T.jsx)("div",{className:"play"})})]})}n(40);function P(){var e=Object(r.useRef)(null),t=Object(m.b)(),n=Object(m.c)((function(e){return e.movies})),a=n.movies,o=n.page,i=n.pageSize,s=n.totalRecords,c=n.searchKey,p=Object(r.useMemo)((function(){return o*i<s}),[o,i,s]);return Object(r.useEffect)((function(){t(v.fetchMovies(1))}),[t]),Object(r.useEffect)((function(){e.current.scrollHeight<=e.current.clientHeight&&(null===c||void 0===c?void 0:c.length)>0&&p&&t(v.fetchMovies(+o+1))}),[t,p,a,o,c]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(N,{onChange:function(e){t(v.searchMovies(e))},title:"Romantic Comedy"}),Object(T.jsx)("div",{ref:e,className:"home-container xl:px-12 lg:px-9 md:px-6 px-3",onScroll:function(){return function(){if(e.current){var n=e.current,r=n.scrollTop,a=n.scrollHeight;r+n.clientHeight>=a-250&&p&&t(v.fetchMovies(+o+1))}}()},children:a.length>0?Object(T.jsx)("div",{className:"grid 2xl:grid-cols-8 xl:grid-cols-6 lg:grid-cols-5 md:grid-cols-4 grid-cols-3 xl:gap-x-6 lg:gap-x-5 md:gap-x-4 gap-x-3",children:a.map((function(e){return Object(T.jsx)(A,{imageURL:"".concat("/diagnal-web","/images/").concat(e["poster-image"]),name:e.name})}))}):Object(T.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:Object(T.jsx)("span",{children:"No Results found !"})})})]})}var C=Object(p.composeWithDevTools)(Object(s.applyMiddleware)(c.a)),M=Object(s.createStore)(y,C);var I=function(){return Object(T.jsx)(m.a,{store:M,children:Object(T.jsx)("div",{className:"app-container",children:Object(T.jsx)(P,{})})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};i.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(I,{})}),document.getElementById("root")),L()}},[[41,1,2]]]);
//# sourceMappingURL=main.34fdef74.chunk.js.map